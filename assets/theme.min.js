(()=>{"use strict";const t={execute(t){this instanceof Element||this instanceof HTMLDocument?t(this):this.forEach(((e,s)=>{t(e,s)}))},listen(e,s,c){const n=(t,e)=>c=>s({$node:t,index:e,e:c}),a=e.split(" ");this.execute(((e,s)=>{const i=Object.assign(e,t);c?a.forEach((t=>{document.addEventListener(t,(t=>{t.target.closest(this.selectedWith)&&n(i,s)(t)}))})):a.forEach((t=>{i.addEventListener(t,(t=>n(i,s)(t)))}))}))},modifyClass(t,e){this.execute((s=>s.classList[t](e)))},addClass(t){this.execute((e=>e.classList.add(t)))},removeClass(t){this.execute((e=>e.classList.remove(t)))},toggleClass(t){this.execute((e=>e.classList.toggle(t)))},addAttr(t,e=""){this.execute((s=>s.setAttribute(t,e)))},removeAttr(t){this.execute((e=>e.removeAttribute(t)))},toggleAttr(t,e=""){this.execute((s=>{s.hasAttribute(t)?s.removeAttribute(t):s.setAttribute(t,e)}))}};function e(e,s=document){const c=[..."string"==typeof e?s.querySelectorAll(e):e].map((s=>Object.assign(s,t,{selectedWith:e}))),n=c&&1===c.length?c[0]:c;return Object.assign(n,t)}async function s(t,e){try{return(await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json()}catch(t){console.error(t)}}class c extends HTMLElement{constructor(){super(),this.quickshop=e("[data-quickshop]",this),this.quickshop.listen("click",(async({$node:t})=>{const e=t.dataset.quickshop,s=await async function(t,e=null){try{const s=await fetch(t,e);return await s.json()}catch(t){console.error(t)}}(`${e}?view=quickshop`),c=JSON.parse(s),n=new CustomEvent("quickshopOpened",{detail:{product:c}});document.dispatchEvent(n)}))}}function n(t){const e=new CustomEvent("cartUpdated",{detail:{currentCart:t}});document.dispatchEvent(e)}(async()=>{e("[data-add-to-cart]").listen("click",(async({$node:t})=>{const{id:e,quantity:c=1}=t.dataset;await async function(t,e=1){const c=await s("/cart/add.js",{items:[{id:t,quantity:e}]});return n(),c}(e,c)})),e("[data-clear-cart]").listen("click",(async()=>{await async function(){const t=await s("/cart/clear.js");return n(),t}()})),e("[data-cart-toggle]").listen("click",(()=>{const t=new CustomEvent("cartToggled");document.dispatchEvent(t)})),customElements.define("quick-shop",c)})()})();