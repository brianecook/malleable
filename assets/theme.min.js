(()=>{"use strict";const t={execute(t){this instanceof Element||this instanceof HTMLDocument?t(this):this.forEach(((e,n)=>{t(e,n)}))},listen(e,n,c){const s=(t,e)=>c=>n({$node:t,index:e,e:c}),a=e.split(" ");this.execute(((e,n)=>{const i=Object.assign(e,t);c?a.forEach((t=>{document.addEventListener(t,(t=>{t.target.closest(this.selectedWith)&&s(i,n)(t)}))})):a.forEach((t=>{i.addEventListener(t,(t=>s(i,n)(t)))}))}))},modifyClass(t,e){this.execute((n=>n.classList[t](e)))}};function e(e,n=document){const c=[..."string"==typeof e?n.querySelectorAll(e):e].map((n=>Object.assign(n,t,{selectedWith:e}))),s=c&&1===c.length?c[0]:c;return Object.assign(s,t)}async function n(t,e){try{return(await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json()}catch(t){console.error(t)}}class c extends HTMLElement{constructor(){super(),this.quickshop=e("[data-quickshop]",this),this.quickshop.listen("click",(async({$node:t})=>{const e=t.dataset.quickshop,n=await async function(t,e=null){try{const n=await fetch(t,e);return await n.json()}catch(t){console.error(t)}}(`${e}?view=quickshop`),c=JSON.parse(n),s=new CustomEvent("quickshopOpened",{detail:{product:c}});document.dispatchEvent(s)}))}}function s(t,e){document.documentElement.style.setProperty(t,e)}function a(t){const e=new CustomEvent("cartUpdated",{detail:{currentCart:t}});document.dispatchEvent(e)}(async()=>{!function(t,e,n="offsetHeight"){const c=window.matchMedia("(min-width: 1200px)"),a=window.matchMedia("(max-width: 1199px)");function i(c){c.matches&&s(t,`${e[n]}px`)}s(t,`${e[n]}px`),c.addEventListener("change",i),a.addEventListener("change",i)}("--headerHeight",e("[data-header]")),e("[data-add-to-cart]").listen("click",(async({$node:t})=>{const{id:e,quantity:c=1}=t.dataset;await async function(t){const e=await n("/cart/add.js",{items:t});return a(),e}(e)})),e("[data-clear-cart]").listen("click",(async()=>{await async function(){const t=await n("/cart/clear.js");return a(),t}()})),customElements.define("quick-shop",c)})()})();